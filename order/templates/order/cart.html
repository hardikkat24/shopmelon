{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block title %}
Cart
{% endblock %}

{% block content %}
<h1>Cart</h1>
<div>
    {% if cart_is_empty %}
        <div>
            Cart is empty.
        </div>
    {% else %}
        <div>
            <b>Total items: {{ quantity }}<br>
                Total amount: {{ amount }}<br></b>
            <table class="table">
                <thead>
                    <tr>
                        <td>S. No.</td>
                        <td>Image</td>
                        <td>Name</td>
                        <td>Quantity</td>
                        <td>Price</td>
                        <td>Remove</td>
                    </tr>
                </thead>
                {% for order_item in order_items %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td><img width="200px" src = "{{ order_item.variant.product.image_url }}"></td>
                    <td>{{ order_item.variant.product.name }} ({{ order_item.variant.name }})</td>
                    <td>{{ order_item.quantity }}</td>
                    <td>{{ order_item.total_amount }}</td>
                    <td><button class = "btn btn-danger btn-sm text-white delete-item" data-id="{{ order_item.pk }}">&times</button></td>
                </tr>
                {% endfor %}
            </table>
        </div>
    {% endif %}
</div>
{% endblock %}

{% block script %}
<script type="text/javascript">
    $(document).on('click', '.delete-item', function (e){
        console.log($(this).attr('data-id'))
    })
</script>
{% endblock %}